# KLOOK â†’ KKday 2ë‹¨ê³„ ì „í™˜: ê¸°ëŠ¥ ë³´ì¡´ ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸

## ğŸ¯ ëª©í‘œ: ëª¨ë“  ê¸°ëŠ¥ 100% ë³´ì¡´í•˜ì—¬ 2ë‹¨ê³„ ë¶„ë¦¬ êµ¬ì¡°ë¡œ ì „í™˜

---

## ğŸ“‹ **1. í™˜ê²½ ì„¤ì • ë° Import í•¨ìˆ˜ë“¤** (Cell 1)

### âœ… **ì‚¬ìš©ì ì„¤ì • ë³€ìˆ˜**
- [ ] `TARGET_PRODUCTS` - ìˆ˜ì§‘í•  ìƒí’ˆ ìˆ˜
- [ ] `CITY_NAME` - ë„ì‹œëª…
- [ ] `TARGET_TAB` - í¬ë¡¤ë§í•  íƒ­
- [ ] `SAVE_IMAGES` - ì´ë¯¸ì§€ ì €ì¥ ì—¬ë¶€
- [ ] `MAX_PAGES` - ìµœëŒ€ í˜ì´ì§€ ìˆ˜
- [ ] `PRODUCTS_PER_PAGE` - í˜ì´ì§€ë‹¹ ìƒí’ˆ ìˆ˜

### âœ… **Config ëª¨ë“ˆ í•¨ìˆ˜ë“¤**
- [ ] `CONFIG` - ì „ì—­ ì„¤ì •
- [ ] `UNIFIED_CITY_INFO` - ë„ì‹œ ì •ë³´
- [ ] `is_url_processed_fast(url, city)` - ì¤‘ë³µ ì²´í¬
- [ ] `mark_url_processed_fast(url, city, num, rank)` - ì²˜ë¦¬ ì™„ë£Œ ë§ˆí‚¹

### âœ… **City Manager í•¨ìˆ˜ë“¤**
- [ ] `normalize_city_name(city)` - ë„ì‹œëª… ì •ê·œí™”
- [ ] `is_city_supported(city)` - ë„ì‹œ ì§€ì› ì—¬ë¶€ í™•ì¸

### âœ… **Driver Manager í•¨ìˆ˜ë“¤**
- [ ] `setup_driver()` - ë“œë¼ì´ë²„ ì´ˆê¸°í™”
- [ ] `go_to_main_page(driver)` - ë©”ì¸ í˜ì´ì§€ ì´ë™
- [ ] `find_and_fill_search(driver, city)` - ê²€ìƒ‰ì°½ ì…ë ¥
- [ ] `click_search_button(driver)` - ê²€ìƒ‰ ë²„íŠ¼ í´ë¦­
- [ ] `handle_popup(driver)` - íŒì—… ì²˜ë¦¬
- [ ] `smart_scroll_selector(driver)` - ìŠ¤í¬ë¡¤ íŒ¨í„´

### âœ… **Parser í•¨ìˆ˜ë“¤**
- [ ] `extract_all_product_data(driver, url, rank, city_name)` - ìƒì„¸ ë°ì´í„° ì¶”ì¶œ

### âœ… **File Handler í•¨ìˆ˜ë“¤**
- [ ] `create_product_data_structure(city, num, rank)` - ë°ì´í„° êµ¬ì¡° ìƒì„±
- [ ] `save_to_csv_klook(data, city)` - CSV ì €ì¥
- [ ] `get_dual_image_urls_klook(driver)` - ì´ë¯¸ì§€ URL ì¶”ì¶œ
- [ ] `download_dual_images_klook(urls, num, city)` - ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ
- [ ] `auto_create_country_csv_after_crawling(city)` - êµ­ê°€ë³„ í†µí•© CSV
- [ ] `get_next_product_number(city)` - ë²ˆí˜¸ ì—°ì†ì„±
- [ ] `get_smart_image_path(city, num, type)` - ì´ë¯¸ì§€ ê²½ë¡œ
- [ ] `get_csv_stats(city)` - CSV í†µê³„
- [ ] `get_city_info(city)` - ë„ì‹œ ì •ë³´
- [ ] `get_city_code(city)` - ë„ì‹œ ì½”ë“œ

---

## ğŸ“‹ **2. ì‚¬ìš©ì ì •ì˜ í•¨ìˆ˜ë“¤** (Cell 2)

### âœ… **íƒ­ ì„ íƒ í•¨ìˆ˜**
- [ ] `select_target_tab(driver, tab_name)` - ì§€ì •ëœ íƒ­ ì„ íƒ
  - [ ] íƒ­ ì„ íƒì ë§¤í•‘: "ì „ì²´", "íˆ¬ì–´&ì•¡í‹°ë¹„í‹°", "í‹°ì¼“&ì…ì¥ê¶Œ", "êµí†µ", "ê¸°íƒ€"
  - [ ] XPath ê¸°ë°˜ íƒ­ í´ë¦­
  - [ ] í˜ì´ì§€ ë¡œë”© ëŒ€ê¸°

### âœ… **URL ìˆ˜ì§‘ í•¨ìˆ˜**
- [ ] `collect_activity_urls_only(driver)` - Activity URLë§Œ ìˆœìœ„ëŒ€ë¡œ ìˆ˜ì§‘
  - [ ] 9ê°œ ë‹¤ì–‘í•œ CSS ì…€ë ‰í„° ì‹œë„
  - [ ] Activity URL íŒ¨í„´ í•„í„°ë§ (`/activity/` í¬í•¨)
  - [ ] ì¤‘ë³µ ì œê±°
  - [ ] í˜ì´ì§€ë‹¹ ìµœëŒ€ 15ê°œ ì œí•œ

### âœ… **í˜ì´ì§€ë„¤ì´ì…˜ í•¨ìˆ˜**
- [ ] `go_to_next_page(driver, current_listing_url)` - ë‹¤ìŒ í˜ì´ì§€ ì´ë™
  - [ ] 8ê°œ í™”ì‚´í‘œ ë²„íŠ¼ ì…€ë ‰í„° ì‹œë„
  - [ ] í™”ì‚´í‘œ í´ë¦­ ë°©ì‹ ìš°ì„  ì‹œë„
  - [ ] URL ì§ì ‘ ë³€ê²½ ë°©ì‹ fallback
  - [ ] í˜ì´ì§€ ë³€í™” ê²€ì¦
  - [ ] ìŠ¤í¬ë¡¤ ì‹¤í–‰

---

## ğŸ“‹ **3. ë“œë¼ì´ë²„ ì´ˆê¸°í™” ë° ê²€ìƒ‰** (Cell 3)

### âœ… **ì´ˆê¸°í™” ì‹œí€€ìŠ¤**
- [ ] `setup_driver()` - Chrome ë“œë¼ì´ë²„ ì„¤ì •
- [ ] `go_to_main_page(driver)` - KLOOK ë©”ì¸ í˜ì´ì§€ ì´ë™
- [ ] `handle_popup(driver)` - íŒì—… ì²˜ë¦¬
- [ ] `find_and_fill_search(driver, CITY_NAME)` - ë„ì‹œ ê²€ìƒ‰
- [ ] `click_search_button(driver)` - ê²€ìƒ‰ ì‹¤í–‰
- [ ] `select_target_tab(driver, TARGET_TAB)` - íƒ­ ì„ íƒ
- [ ] `listing_page_url` ì €ì¥ - ëª©ë¡ í˜ì´ì§€ URL ë°±ì—…

---

## ğŸ“‹ **4. ë©”ì¸ í¬ë¡¤ë§ ë¡œì§** (Cell 4)

### âœ… **í˜ì´ì§€ ë£¨í”„ ë¡œì§**
- [ ] `while total_collected < TARGET_PRODUCTS and current_page <= MAX_PAGES`
- [ ] í˜ì´ì§€ë³„ ì§„í–‰ ìƒí™© í‘œì‹œ
- [ ] í˜ì´ì§€ë‹¹ ì²˜ë¦¬ ìƒí’ˆ ìˆ˜ ì œí•œ

### âœ… **URL ìˆ˜ì§‘ ë‹¨ê³„**
- [ ] `collect_activity_urls_only(driver)` í˜¸ì¶œ
- [ ] Activity URL ì¡´ì¬ ì—¬ë¶€ í™•ì¸
- [ ] ë¹ˆ í˜ì´ì§€ ì‹œ ë‹¤ìŒ í˜ì´ì§€ë¡œ ì´ë™

### âœ… **ê°œë³„ ìƒí’ˆ í¬ë¡¤ë§ ë£¨í”„**
- [ ] URL ìˆœì°¨ ì²˜ë¦¬ (ìˆœìœ„ ê¸°ë°˜)
- [ ] `is_url_processed_fast(url, CITY_NAME)` - ì¤‘ë³µ ì²´í¬
- [ ] ìƒí’ˆ í˜ì´ì§€ ì´ë™ (`driver.get(url)`)
- [ ] `smart_scroll_selector(driver)` - ìŠ¤í¬ë¡¤ íŒ¨í„´ ì‹¤í–‰

### âœ… **ë°ì´í„° ì¶”ì¶œ ì‹œí€€ìŠ¤**
- [ ] `extract_all_product_data(driver, url, current_rank, city_name=CITY_NAME)`
- [ ] `get_next_product_number(CITY_NAME)` - ë²ˆí˜¸ ì—°ì†ì„±
- [ ] `create_product_data_structure(CITY_NAME, next_num, current_rank)` - ê¸°ë³¸ êµ¬ì¡°
- [ ] ë°ì´í„° ë³‘í•© (`base_data.update(product_data)`)
- [ ] íƒ­ ì •ë³´ ì¶”ê°€ (`base_data['íƒ­'] = TARGET_TAB`)

### âœ… **ì´ë¯¸ì§€ ì²˜ë¦¬ ì‹œí€€ìŠ¤**
- [ ] `get_dual_image_urls_klook(driver)` - ì´ë¯¸ì§€ URL ì¶”ì¶œ
- [ ] `download_dual_images_klook(image_urls, next_num, CITY_NAME)` - ë‹¤ìš´ë¡œë“œ
- [ ] `get_smart_image_path(CITY_NAME, next_num, "main")` - ë©”ì¸ ì´ë¯¸ì§€ ê²½ë¡œ
- [ ] `get_smart_image_path(CITY_NAME, next_num, "thumb")` - ì¸ë„¤ì¼ ê²½ë¡œ
- [ ] íŒŒì¼ëª… ì €ì¥ (`ë©”ì¸ì´ë¯¸ì§€_íŒŒì¼ëª…`, `ì¸ë„¤ì¼ì´ë¯¸ì§€_íŒŒì¼ëª…`)

### âœ… **ë°ì´í„° ì €ì¥ ì‹œí€€ìŠ¤**
- [ ] `save_to_csv_klook(base_data, CITY_NAME)` - CSV ì €ì¥
- [ ] `mark_url_processed_fast(url, CITY_NAME, next_num, current_rank)` - ì²˜ë¦¬ ì™„ë£Œ
- [ ] ë­í‚¹ ì •ë³´ ìˆ˜ì§‘ (ranking_data ë°°ì—´)
- [ ] ìˆ˜ì§‘ ì¹´ìš´í„° ì¦ê°€ (`total_collected += 1`)

### âœ… **í˜ì´ì§€ë„¤ì´ì…˜ ë¡œì§**
- [ ] `go_to_next_page(driver, current_listing_url)` - ë‹¤ìŒ í˜ì´ì§€
- [ ] URL ì—…ë°ì´íŠ¸ (`current_listing_url = new_listing_url`)
- [ ] í˜ì´ì§€ ì¹´ìš´í„° ì¦ê°€ (`current_page += 1`)

### âœ… **ìµœì¢… ì •ë¦¬**
- [ ] `auto_create_country_csv_after_crawling(CITY_NAME)` - êµ­ê°€ë³„ í†µí•© CSV
- [ ] ë“œë¼ì´ë²„ ì¢…ë£Œ ì²˜ë¦¬

---

## ğŸ“‹ **5. ë­í‚¹ ë°ì´í„° ì €ì¥** (Cell 5)

### âœ… **ë­í‚¹ JSON ìƒì„±**
- [ ] `get_city_code(CITY_NAME)` - ë„ì‹œ ì½”ë“œ ì¶”ì¶œ
- [ ] íƒ€ì„ìŠ¤íƒ¬í”„ ìƒì„± (`datetime.now().strftime("%Y%m%d_%H%M%S")`)
- [ ] íŒŒì¼ëª… ìƒì„± (`{city_code}_{tab_safe}_ranking_{timestamp}.json`)
- [ ] ë­í‚¹ ìš”ì•½ êµ¬ì¡°í™”
  - [ ] `city_name`, `city_code`, `tab_name`
  - [ ] `target_products`, `total_collected`, `pages_processed`
  - [ ] `collected_at`, `ranking_data`
- [ ] JSON íŒŒì¼ ì €ì¥ (`json.dump`)

---

## ğŸ“‹ **6. ê²°ê³¼ ìš”ì•½** (Cell 6)

### âœ… **ìˆ˜ì§‘ í†µê³„ í‘œì‹œ**
- [ ] ëª©í‘œ vs ì‹¤ì œ ìˆ˜ì§‘ ë¹„êµ
- [ ] ì²˜ë¦¬í•œ í˜ì´ì§€ ìˆ˜
- [ ] ìˆœìœ„ ë²”ìœ„ í‘œì‹œ

### âœ… **íŒŒì¼ ìƒíƒœ í™•ì¸**
- [ ] `get_csv_stats(CITY_NAME)` - CSV íŒŒì¼ í†µê³„
- [ ] CSV íŒŒì¼ í¬ê¸° í‘œì‹œ
- [ ] ë­í‚¹ JSON íŒŒì¼ í™•ì¸
- [ ] ì´ë¯¸ì§€ íŒŒì¼ ê°œìˆ˜ í™•ì¸ (`klook_img/{CITY_NAME}` í´ë”)

### âœ… **ì„±ê³µë¥  ê³„ì‚°**
- [ ] `(total_collected/TARGET_PRODUCTS*100)` ê³„ì‚°
- [ ] ë¯¸ë‹¬ ì‹œ ì°¸ê³ ì‚¬í•­ í‘œì‹œ

---

## ğŸ“‹ **7. ë°ì´í„° ë¯¸ë¦¬ë³´ê¸° ë° í’ˆì§ˆ ë¶„ì„** (Cell 7)

### âœ… **ë­í‚¹ ë°ì´í„° ë¯¸ë¦¬ë³´ê¸°**
- [ ] ìˆ˜ì§‘ëœ ìƒí’ˆ ì²˜ìŒ 5ê°œ í‘œì‹œ
- [ ] URL, íƒ­, í˜ì´ì§€, ìˆ˜ì§‘ì‹œê°„ ì •ë³´

### âœ… **CSV ë°ì´í„° ë¯¸ë¦¬ë³´ê¸°**
- [ ] `get_city_info(CITY_NAME)` - ë„ì‹œ ì •ë³´
- [ ] CSV íŒŒì¼ ê²½ë¡œ ê²°ì • (ëŒ€ë¥™/êµ­ê°€/ë„ì‹œ êµ¬ì¡°)
- [ ] `pandas.read_csv()` - CSV ë¡œë“œ
- [ ] ì»¬ëŸ¼ ëª©ë¡ ë° í–‰ ìˆ˜ í‘œì‹œ
- [ ] ìƒìœ„ 3ê°œ ìƒí’ˆ ë¯¸ë¦¬ë³´ê¸°

### âœ… **ë°ì´í„° í’ˆì§ˆ ë¶„ì„**
- [ ] í•„ìˆ˜ í•„ë“œ ì™„ì„±ë„ í™•ì¸ (`ìƒí’ˆëª…`, `ê°€ê²©`, `í‰ì `, `URL`)
- [ ] v2.0 ì‹ ê·œ í•„ë“œ ì™„ì„±ë„ (`í•˜ì´ë¼ì´íŠ¸`, `ì–¸ì–´`)
- [ ] ì–¸ì–´ë³„ ë¶„í¬ ë¶„ì„
- [ ] ê°€ê²© ë²”ìœ„ ë¶„ì„ (ìµœì €ê°€, ìµœê³ ê°€, í‰ê· ê°€, ì¤‘ê°„ê°€)

### âœ… **ìµœì¢… ìˆ˜ì§‘ ê²°ê³¼ ìš”ì•½**
- [ ] ì „ì²´ ìƒí’ˆ ìˆ˜ì§‘ ê°œìˆ˜
- [ ] ëª©í‘œ ë‹¬ì„±ë¥ 
- [ ] Sitemap ë³´ì™„ ì‚¬ìš© ì—¬ë¶€
- [ ] í•˜ì´ë¼ì´íŠ¸ ìˆ˜ì§‘ ì—¬ë¶€
- [ ] ì–¸ì–´ ì •ë³´ ìˆ˜ì§‘ ì—¬ë¶€

---

## ğŸ¯ **2ë‹¨ê³„ ë¶„ë¦¬ ë§¤í•‘ ê³„íš**

### ğŸ” **Stage 1 (URL ìˆ˜ì§‘)ì— í¬í•¨ë  ê¸°ëŠ¥ë“¤**
```
Cell 1: í™˜ê²½ ì„¤ì • (ê·¸ëŒ€ë¡œ)
Cell 2: í•¨ìˆ˜ ì •ì˜ (ê·¸ëŒ€ë¡œ)
Cell 3: ë“œë¼ì´ë²„ ì´ˆê¸°í™” ë° ê²€ìƒ‰ (ê·¸ëŒ€ë¡œ)
Cell 4: URL ìˆ˜ì§‘ë§Œ ë¶„ë¦¬
  - collect_activity_urls_only()
  - go_to_next_page() (í˜ì´ì§€ë„¤ì´ì…˜)
  - txt íŒŒì¼ ì €ì¥
  - ë“œë¼ì´ë²„ ì¢…ë£Œ
```

### ğŸ” **Stage 2 (ìƒì„¸ í¬ë¡¤ë§)ì— í¬í•¨ë  ê¸°ëŠ¥ë“¤**
```
Cell 5: ìƒì„¸ í¬ë¡¤ë§ë§Œ ë¶„ë¦¬
  - txt íŒŒì¼ ë¡œë“œ
  - extract_all_product_data()
  - ì´ë¯¸ì§€ ì²˜ë¦¬ ì „ì²´ ì‹œí€€ìŠ¤
  - CSV ì €ì¥ ì „ì²´ ì‹œí€€ìŠ¤
  - ë­í‚¹ ë°ì´í„° ì €ì¥
  - êµ­ê°€ë³„ í†µí•© CSV
Cell 6: ê²°ê³¼ ìš”ì•½ (ê·¸ëŒ€ë¡œ)
Cell 7: ë°ì´í„° ë¯¸ë¦¬ë³´ê¸° (ê·¸ëŒ€ë¡œ)
```

---

## âœ… **ê²€ì¦ ì™„ë£Œ ê¸°ì¤€**

### ğŸ“‹ **ê¸°ëŠ¥ ë³´ì¡´ ê²€ì¦**
- [ ] ëª¨ë“  importëœ í•¨ìˆ˜ 100% ì‚¬ìš©
- [ ] ëª¨ë“  ì‚¬ìš©ì ì •ì˜ í•¨ìˆ˜ 100% ì‚¬ìš©
- [ ] ëª¨ë“  ì„¤ì • ë³€ìˆ˜ 100% ì ìš©
- [ ] ëª¨ë“  ë°ì´í„° ì²˜ë¦¬ ë¡œì§ 100% ë³´ì¡´

### ğŸ“‹ **ë°ì´í„° ë¬´ê²°ì„± ê²€ì¦**
- [ ] ë™ì¼í•œ CSV ì»¬ëŸ¼ êµ¬ì¡°
- [ ] ë™ì¼í•œ ì´ë¯¸ì§€ ì €ì¥ ë¡œì§
- [ ] ë™ì¼í•œ ë­í‚¹ JSON êµ¬ì¡°
- [ ] ë™ì¼í•œ ë²ˆí˜¸ ì—°ì†ì„±

### ğŸ“‹ **ì‚¬ìš©ì ê²½í—˜ ê²€ì¦**
- [ ] ë™ì¼í•œ ì„¤ì • ë³€ìˆ˜ë“¤
- [ ] ë™ì¼í•œ ì§„í–‰ ìƒí™© í‘œì‹œ
- [ ] ë™ì¼í•œ ê²°ê³¼ ìš”ì•½ í™”ë©´
- [ ] ë™ì¼í•œ ë°ì´í„° ë¯¸ë¦¬ë³´ê¸°

---

**ğŸ¯ ì´ ì²´í¬ë¦¬ìŠ¤íŠ¸ì˜ ëª¨ë“  í•­ëª©ì´ âœ… ì™„ë£Œë˜ì–´ì•¼ë§Œ 2ë‹¨ê³„ ì „í™˜ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë¨**