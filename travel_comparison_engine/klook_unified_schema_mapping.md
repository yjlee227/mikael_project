# ğŸ”„ KLOOK â†’ í†µí•© ìŠ¤í‚¤ë§ˆ ë§¤í•‘í‘œ

## í˜„ì¬ KLOOK 32ì»¬ëŸ¼ êµ¬ì¡° â†’ í†µí•© ìŠ¤í‚¤ë§ˆ ë³€í™˜

### â­ í•„ìˆ˜ í•„ë“œ ë§¤í•‘

| í†µí•© ìŠ¤í‚¤ë§ˆ í•„ë“œ | KLOOK 32ì»¬ëŸ¼ | ë³€í™˜ ê·œì¹™ | ìš°ì„ ìˆœìœ„ |
|---|---|---|---|
| **provider** | âŒ | `"Klook"` ê³ ì •ê°’ | â­â­â­ |
| **provider_product_id** | `URL` | URLì—ì„œ ID ì¶”ì¶œ | â­â­â­ |
| **fetch_ts** | âŒ | `datetime.utcnow().isoformat()` | â­â­â­ |
| **destination_city** | `ë„ì‹œëª…` | ë„ì‹œ ì •ê·œí™” ì‚¬ì „ ì ìš© | â­â­â­ |
| **country** | `êµ­ê°€` | ì˜ë¬¸ êµ­ê°€ëª…ìœ¼ë¡œ ë³€í™˜ | â­â­â­ |
| **title** | `ìƒí’ˆëª…` | ì§ì ‘ ë§¤í•‘ | â­â­â­ |
| **price_value** | `ê°€ê²©_ì •ì œ` | ìˆ«ì ì¶”ì¶œ í›„ float | â­â­â­ |
| **price_currency** | `í†µí™”` | ISO4217 ë³€í™˜ | â­â­â­ |
| **landing_url** | `URL` | ì§ì ‘ ë§¤í•‘ | â­â­â­ |

### ğŸ“Š ê¸°ë³¸ ì •ë³´ ë§¤í•‘

| í†µí•© ìŠ¤í‚¤ë§ˆ í•„ë“œ | KLOOK 32ì»¬ëŸ¼ | ë³€í™˜ ê·œì¹™ | ìš°ì„ ìˆœìœ„ |
|---|---|---|---|
| **subtitle** | `ë¶€ì œëª©/ì„¤ëª…` | ì§ì ‘ ë§¤í•‘ | â­â­ |
| **supplier_name** | `ê³µê¸‰ì‚¬` | ì •ê·œí™” í…Œì´ë¸” ì ìš© | â­â­ |
| **duration_hours** | `ì†Œìš”ì‹œê°„` | ì‹œê°„ ë‹¨ìœ„ë¡œ ë³€í™˜ | â­â­ |
| **pickup** | `í”½ì—…í¬í•¨` | bool ë³€í™˜ | â­â­ |
| **rating_value** | `í‰ì _ì •ì œ` | 0~5 ìŠ¤ì¼€ì¼ ì •ê·œí™” | â­â­ |
| **rating_count** | `ë¦¬ë·°ìˆ˜` | int ë³€í™˜ | â­â­ |
| **images** | `ë©”ì¸ì´ë¯¸ì§€URL`, `ì¸ë„¤ì¼URL` | JSON ë°°ì—´ë¡œ ê²°í•© | â­â­ |

### ğŸ†• ìƒˆë¡œ ì¶”ê°€í•  í•„ë“œ

| í†µí•© ìŠ¤í‚¤ë§ˆ í•„ë“œ | êµ¬í˜„ ë°©ë²• | ìš°ì„ ìˆœìœ„ |
|---|---|---|
| **fx_rate** | ì‹¤ì‹œê°„ í™˜ìœ¨ API ì—°ë™ | â­ |
| **theme_tags[]** | ìƒí’ˆëª…/ì¹´í…Œê³ ë¦¬ì—ì„œ í‚¤ì›Œë“œ ì¶”ì¶œ | â­ |
| **language[]** | ì–¸ì–´ ì •ë³´ í¬ë¡¤ë§ ì¶”ê°€ | â­ |
| **included[]** | í¬í•¨í•­ëª© íŒŒì‹± | â­ |
| **excluded[]** | ë¶ˆí¬í•¨í•­ëª© íŒŒì‹± | â­ |
| **meeting_point** | ë¯¸íŒ…í¬ì¸íŠ¸ í¬ë¡¤ë§ | â­ |
| **option_list[]** | ì˜µì…˜ë³„ ê°€ê²© í¬ë¡¤ë§ | â­ |
| **cancel_policy** | ì·¨ì†Œì •ì±… íŒŒì‹± | â­ |
| **availability_calendar[]** | ë‚ ì§œë³„ ê°€ìš©ì„± | ğŸ”„ |
| **rank_position** | í˜„ì¬ ë­í‚¹ ì‹œìŠ¤í…œ í™œìš© | â­â­ |
| **affiliate_url** | UTM/íŒŒíŠ¸ë„ˆ ì½”ë“œ ì¶”ê°€ | ğŸ”„ |

## ğŸ”§ êµ¬í˜„ ë‹¨ê³„

### Phase 1: ê¸°ë³¸ ë§¤í•‘ (ì¦‰ì‹œ ê°€ëŠ¥)
1. **í•„ìˆ˜ 9ê°œ í•„ë“œ** ë§¤í•‘ í•¨ìˆ˜ êµ¬í˜„
2. **SQLite í…Œì´ë¸”** ìƒì„±
3. **CSV â†’ SQLite** ë³€í™˜ ìŠ¤í¬ë¦½íŠ¸

### Phase 2: í¬ë¡¤ë§ í™•ì¥ (ê°œë°œ í•„ìš”)
1. **ì–¸ì–´/í¬í•¨í•­ëª©/ì·¨ì†Œì •ì±…** í¬ë¡¤ë§ ì¶”ê°€
2. **ì˜µì…˜ë³„ ê°€ê²©** ìˆ˜ì§‘
3. **í…Œë§ˆ íƒœê·¸** ìë™ ì¶”ì¶œ

### Phase 3: ê³ ë„í™” (ì„ íƒì‚¬í•­)
1. **í™˜ìœ¨ API** ì—°ë™
2. **ê°€ìš©ì„± ìº˜ë¦°ë”** ìˆ˜ì§‘
3. **ì œíœ´ ë§í¬** ìƒì„±

---

## ğŸ“‹ ë³€í™˜ í•¨ìˆ˜ ì˜ˆì‹œ

```python
def klook_to_unified_schema(klook_data):
    """KLOOK 32ì»¬ëŸ¼ ë°ì´í„°ë¥¼ í†µí•© ìŠ¤í‚¤ë§ˆë¡œ ë³€í™˜"""
    return {
        # â­ í•„ìˆ˜ í•„ë“œ
        "provider": "Klook",
        "provider_product_id": extract_id_from_url(klook_data['URL']),
        "fetch_ts": datetime.utcnow().isoformat(),
        "destination_city": normalize_city_name(klook_data['ë„ì‹œëª…']),
        "country": convert_to_english_country(klook_data['êµ­ê°€']),
        "title": klook_data['ìƒí’ˆëª…'],
        "price_value": float(klook_data['ê°€ê²©_ì •ì œ']),
        "price_currency": convert_to_iso4217(klook_data['í†µí™”']),
        "landing_url": klook_data['URL'],
        
        # ğŸ“Š ê¸°ë³¸ ì •ë³´
        "rating_value": normalize_rating(klook_data['í‰ì _ì •ì œ']),
        "rating_count": int(klook_data['ë¦¬ë·°ìˆ˜'] or 0),
        "images": [klook_data['ë©”ì¸ì´ë¯¸ì§€URL'], klook_data['ì¸ë„¤ì¼URL']],
        
        # ğŸ†• í™•ì¥ í•„ë“œ
        "rank_position": klook_data.get('íƒ­ë‚´_ë­í‚¹', 999),
        "theme_tags": extract_themes_from_title(klook_data['ìƒí’ˆëª…'])
    }
```

---

## ğŸ¯ ë‹¤ìŒ ë‹¨ê³„: SQLite í†µí•© DB êµ¬í˜„